version: "3.6"

#Liste des servies
services:
  #Le service GitLAb
  gitlab:
    image: gitlab/gitlab-ce
    hostname: 'gitlab.lugar.com'
    ports:
      - "443:443"
      - "80:80"
      - "22"
    container_name: gitlab
    volumes:
      - ./gitlab_data/data:/var/opt/gitlab
      - ./gitlab_data/log:/var/log/gitlab
      - ./gitlab_data/config:/etc/gitlab

    env_file:
      - .env
    networks:
      net_backend:
        ipv4_address: 172.21.0.2
        aliases:
          - gitlab
    restart: unless-stopped

networks:
  net_backend:
    external:
      name: lugar_net_backend